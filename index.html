 <!DOCTYPE html>
<html>
  <head>
  <script type="text/javascript">
window.onerror = function(msg, url, line, col, error) {
   // Note that col & error are new to the HTML 5 spec and may not be 
   // supported in every browser.  It worked for me in Chrome.
   var extra = !col ? '' : '\ncolumn: ' + col;
   extra += !error ? '' : '\nerror: ' + error;

   // You can view the information in an alert to see things working like this:
   alert("Error: " + msg + "\nurl: " + url + "\nline: " + line + extra);

   // TODO: Report this error via ajax so you can keep track
   //       of what pages have JS issues

   var suppressErrorAlert = true;
   // If you return true, then error alerts (like in older versions of 
   // Internet Explorer) will be suppressed.
   return suppressErrorAlert;
};
</script>
    <title>Nodewords 1428</title>
    <script>
    var guessed = new Array();
    var word = "";
    var shown = "";
    var guesses = 0;
    var lives = 15;
    var definition = "";
 
    function loadFile(filePath) {
		var result = null;
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", filePath, false);
		xmlhttp.send();
		if (xmlhttp.status==200) {
			result = xmlhttp.responseText;
		}
		return result;
	}
			
	function sendguess(){
		value = document.getElementById("wentry").value;
		if (value == word){
			alert("Win!");
		}else{
			if (guesses.include(value)){
				alert("You already guessed that.")
			}else{
				alert("Incorrect guess.");
				guessed.push(value);
				document.getElementById("guesses").innerHTML = guessed.join("<br>");
			}
		}
	}
	function pickRandomProperty(obj) {
		var result;
		var count = 0;
		for (var prop in obj)
			if (Math.random() < 1/++count)
			result = prop;
		return result;
	}
	
	function newgame(){
		if (confirm("Start a new game?")){
			//console.log("Begin")
			guessed = new Array();
			word = "";
			shown = "";
			definition = "";
			guesses = 0;
			lives = 15;
			document.getElementById("guesses").innerHTML = "None";
			document.getElementById("shownWord").innerHTML = "Please wait, grabbing a word...";
			var data = JSON.parse(loadFile('https://kaiz0r.github.io/dictionary.json'));
			var new_obj = pickRandomProperty(data);
			
			definition = data[new_obj];
			word = new_obj.toLowerCase();
			alert(word+" - "+definition);
			document.getElementById("shownWord").innerHTML = "*".repeat(word.length);
		}
	}
		
	</script>
  </head>
  <body>
    <label id="shownWord">Press new game.</label><br>
	Guess: <input type="text" name="input" id="wentry"><button onclick="newgame()">New Game</button><button onclick="sendguess()">Send Guess</button><br>
	<label id="guesses">None.</label>
  </body>
</html>
